<!DOCTYPE html>
<html lang="es">

<head>
    <meta charset="UTF-8">
    <title>Punto de Venta (POS)</title>
    <link rel="stylesheet" href="/static/css/roles/admin.css">
    <link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/6.0.0/css/all.min.css">
<style>
        .pos-container { 
            display: flex; 
            gap: 20px; 
            margin: 20px;

            height: calc(100vh - 140px); /* Ocupar alto disponible */
        }
        
        /* CORRECCIÓN: Ajustamos proporciones (Antes 2:1, Ahora 60% - 40%) */
        .pos-left { 
            flex: 5; 
            display: flex; 
            flex-direction: column; 
        }
        
        .pos-right { 
            flex: 5; 
            display: flex; 
            flex-direction: column;
        }
        
        .search-box { display: flex; gap: 10px; margin-bottom: 20px; }
        .search-box input { flex: 1; padding: 12px; font-size: 1.1rem; border-radius: 8px; border: 1px solid #ccc; }
        
        .product-list { 
            display: grid; 
            /* Grid dinámico: tarjetas de min 140px */
            grid-template-columns: repeat(auto-fill, minmax(140px, 1fr)); 
            gap: 15px; 
            overflow-y: auto; 
            padding-right: 5px;
            align-content: start;
        }
        
        .product-card { 
            background: white; padding: 15px; border: 1px solid #ddd; border-radius: 8px; cursor: pointer; transition: 0.2s; text-align: center;
            box-shadow: 0 2px 4px rgba(0,0,0,0.05);
        }
        .product-card:hover { border-color: #F2B705; transform: translateY(-2px); box-shadow: 0 4px 8px rgba(0,0,0,0.1); }
        .product-card h4 { margin: 10px 0 5px; font-size: 1rem; color: #333; }
        .product-price { color: #2E7D32; font-weight: bold; font-size: 1.2em; display: block; margin-bottom: 5px;}
        
        /* Carrito más grande y fijado */
        .cart-summary { 
            background: white; 
            padding: 20px; 
            border-radius: 12px; 
            border-top: 6px solid #F2B705; 
            display: flex; 
            flex-direction: column; 
            height: 100%; /* Llenar altura */
            box-shadow: 0 4px 12px rgba(0,0,0,0.08);
        }

        .cart-items-container {
            flex: 1; /* Ocupar espacio restante */
            overflow-y: auto;
            margin: 15px 0;
            border-top: 1px solid #eee;
            border-bottom: 1px solid #eee;
        }

        table { width: 100%; font-size: 1rem; border-collapse: collapse; }
        th { text-align: left; color: #666; padding: 10px 5px; border-bottom: 1px solid #ddd; }
        td { padding: 10px 5px; border-bottom: 1px solid #f9f9f9; }
        
        .total-section { 
            font-size: 2rem; 
            font-weight: bold; 
            text-align: right; 
            margin-bottom: 20px; 
            color: #333;
        }
    </style>
</head>

<body>

    <div class="main">
        <div class="header">
            <h1>Facturación</h1>
            <a href="/caja" class="btn btn-secondary">← Volver a Caja</a>
        </div>

        <div class="pos-container">

            <div class="pos-left">
                <div class="search-box">
                    <input type="text" id="buscador" placeholder="Buscar producto por nombre..."
                        onkeyup="filtrarProductos()">
                </div>

                <h3>Productos Disponibles</h3>
                <div id="lista-productos" class="product-list">
                </div>
            </div>

            <div class="pos-right">
                <div class="cart-summary">
                    <h3><i class="fas fa-shopping-cart"></i> Carrito de Venta</h3>

                    <div style="margin-bottom: 15px;">
                        <label>Cliente:</label>
                        <select id="select-cliente" style="width: 100%; padding: 8px;">
                            <option value="">Consumidor Final</option>
                        </select>
                    </div>

                    <table style="width: 100%; font-size: 0.9rem;">
                        <thead>
                            <tr>
                                <th>Prod.</th>
                                <th>Cant.</th>
                                <th>Subt.</th>
                                <th></th>
                            </tr>
                        </thead>
                        <tbody id="tabla-carrito">
                        </tbody>
                    </table>

                    <div class="total-section">
                        Total: $<span id="total-venta">0.00</span>
                    </div>

                    <button class="btn btn-primary" style="width: 100%; font-size: 1.2rem;" onclick="procesarVenta()">
                        <i class="fas fa-check-circle"></i> Cobrar
                    </button>
                </div>
            </div>

        </div>
    </div>

    <script src="/static/js/ventas/pos.js"></script>
</body>

</html>